{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

<div class="container py-4">

  <!-- ================== Header ================== -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="mb-0">Homework</h3>
  </div>

  <!-- ================== Homework Table ================== -->
  {% if homework_not_done %}
  <div class="table-responsive mb-5">
    <table class="table table-hover align-middle">

      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Subject</th>
          <th>Title</th>
          <th>Description</th>
          <th>Due</th>
          <th>Status</th>
          <th>Update</th>
          <th>Delete</th>
        </tr>
      </thead>

      <tbody>
        {% for home in homework %}
        <tr>
          <!-- Serial Number -->
          <td>{{ forloop.counter }}</td>

          <td>{{ home.subject }}</td>
          <td>{{ home.title }}</td>
          <td class="text-muted">
            {{ home.description|safe|truncatewords:15 }}
          </td>
          <td>{{ home.due }}</td>

          <td>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" {% if home.is_finished %}checked{% endif %} disabled>
              <label class="form-check-label text-muted">
                Completed
              </label>
            </div>
          </td>

          <td>
            <a href="{% url 'homework_update' home.pk %}" class="btn btn-sm btn-outline-primary">
              Update
            </a>
          </td>
          <td>
            <a href="{% url 'homework_delete' home.pk %}" class="btn btn-sm btn-outline-danger">
              Delete
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>

    </table>
  </div>
  {% else %}
  <div class="alert alert-success text-center">
    All homeworks are completed ðŸŽ‰
    Create more to stay productive!
  </div>
  {% endif %}

  <!-- ================== Create Homework ================== -->
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">

      <div class="card">
        <div class="card-body">

          <h5 class="card-title mb-3">
            Create Homework
          </h5>

          <form method="POST">
            {% csrf_token %}
            {{ form|crispy }}

            <div class="d-grid mt-3">
              <button type="submit" class="btn btn-primary">
                Create Homework
              </button>
            </div>
          </form>

        </div>
      </div>

    </div>
  </div>

</div>

{% endblock content %}